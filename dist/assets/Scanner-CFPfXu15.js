import{R as g,r as m,j as a,d as w,b as N,n as K,k as R,o as O,m as B,p as F,q as A,v as I,w as L,x as V,E as U}from"./index-C20T9yLr.js";import{r as C}from"./index-COb8Ols3.js";import _ from"./ViewSvg-BKG-2Wp2.js";import"./index-BKNjMPK8.js";function E(i,l){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o},E(i,l)}function H(i,l){i.prototype=Object.create(l.prototype),i.prototype.constructor=i,E(i,l)}function k(i){return i&&i.stopPropagation&&i.stopPropagation(),i&&i.preventDefault&&i.preventDefault(),!1}function P(i){return i==null?[]:Array.isArray(i)?i.slice():[i]}function y(i){return i!==null&&i.length===1?i[0]:i.slice()}function S(i){Object.keys(i).forEach(l=>{typeof document<"u"&&document.addEventListener(l,i[l],!1)})}function x(i,l){return D(function(o,t){let e=o;return e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e}(i,l),l)}function D(i,l){const o=(i-l.min)%l.step;let t=i-o;return 2*Math.abs(o)>=l.step&&(t+=o>0?l.step:-l.step),parseFloat(t.toFixed(5))}let T=function(i){function l(t){var e;(e=i.call(this,t)||this).onKeyUp=()=>{e.onEnd()},e.onMouseUp=()=>{e.onEnd(e.getMouseEventMap())},e.onTouchEnd=s=>{s.preventDefault(),e.onEnd(e.getTouchEventMap())},e.onBlur=()=>{e.setState({index:-1},e.onEnd(e.getKeyDownEventMap()))},e.onMouseMove=s=>{e.setState({pending:!0});const c=e.getMousePosition(s),u=e.getDiffPosition(c[0]),p=e.getValueFromPosition(u);e.move(p)},e.onTouchMove=s=>{if(s.touches.length>1)return;e.setState({pending:!0});const c=e.getTouchPosition(s);if(e.isScrolling===void 0){const h=c[0]-e.startPosition[0],d=c[1]-e.startPosition[1];e.isScrolling=Math.abs(d)>Math.abs(h)}if(e.isScrolling)return void e.setState({index:-1});const u=e.getDiffPosition(c[0]),p=e.getValueFromPosition(u);e.move(p)},e.onKeyDown=s=>{if(!(s.ctrlKey||s.shiftKey||s.altKey||s.metaKey))switch(e.setState({pending:!0}),s.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":s.preventDefault(),e.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":s.preventDefault(),e.moveUpByStep();break;case"Home":s.preventDefault(),e.move(e.props.min);break;case"End":s.preventDefault(),e.move(e.props.max);break;case"PageDown":s.preventDefault(),e.moveDownByStep(e.props.pageFn(e.props.step));break;case"PageUp":s.preventDefault(),e.moveUpByStep(e.props.pageFn(e.props.step))}},e.onSliderMouseDown=s=>{if(!e.props.disabled&&s.button!==2){if(e.setState({pending:!0}),!e.props.snapDragDisabled){const c=e.getMousePosition(s);e.forceValueFromPosition(c[0],u=>{e.start(u,c[0]),S(e.getMouseEventMap())})}k(s)}},e.onSliderClick=s=>{if(!e.props.disabled&&e.props.onSliderClick&&!e.hasMoved){const c=e.getMousePosition(s),u=x(e.calcValue(e.calcOffsetFromPosition(c[0])),e.props);e.props.onSliderClick(u)}},e.createOnKeyDown=s=>c=>{e.props.disabled||(e.start(s),S(e.getKeyDownEventMap()),k(c))},e.createOnMouseDown=s=>c=>{if(e.props.disabled||c.button===2)return;e.setState({pending:!0});const u=e.getMousePosition(c);e.start(s,u[0]),S(e.getMouseEventMap()),k(c)},e.createOnTouchStart=s=>c=>{if(e.props.disabled||c.touches.length>1)return;e.setState({pending:!0});const u=e.getTouchPosition(c);e.startPosition=u,e.isScrolling=void 0,e.start(s,u[0]),S(e.getTouchEventMap()),function(p){p.stopPropagation&&p.stopPropagation()}(c)},e.handleResize=()=>{const s=window.setTimeout(()=>{e.pendingResizeTimeouts.shift(),e.resize()},0);e.pendingResizeTimeouts.push(s)},e.renderThumb=(s,c)=>{const u=e.props.thumbClassName+" "+e.props.thumbClassName+"-"+c+" "+(e.state.index===c?e.props.thumbActiveClassName:""),p={ref:d=>{e["thumb"+c]=d},key:e.props.thumbClassName+"-"+c,className:u,style:s,onMouseDown:e.createOnMouseDown(c),onTouchStart:e.createOnTouchStart(c),onFocus:e.createOnKeyDown(c),tabIndex:0,role:"slider","aria-orientation":e.props.orientation,"aria-valuenow":e.state.value[c],"aria-valuemin":e.props.min,"aria-valuemax":e.props.max,"aria-label":Array.isArray(e.props.ariaLabel)?e.props.ariaLabel[c]:e.props.ariaLabel,"aria-labelledby":Array.isArray(e.props.ariaLabelledby)?e.props.ariaLabelledby[c]:e.props.ariaLabelledby,"aria-disabled":e.props.disabled},h={index:c,value:y(e.state.value),valueNow:e.state.value[c]};return e.props.ariaValuetext&&(p["aria-valuetext"]=typeof e.props.ariaValuetext=="string"?e.props.ariaValuetext:e.props.ariaValuetext(h)),e.props.renderThumb(p,h)},e.renderTrack=(s,c,u)=>{const p={key:e.props.trackClassName+"-"+s,className:e.props.trackClassName+" "+e.props.trackClassName+"-"+s,style:e.buildTrackStyle(c,e.state.upperBound-u)},h={index:s,value:y(e.state.value)};return e.props.renderTrack(p,h)};let n=P(t.value);n.length||(n=P(t.defaultValue)),e.pendingResizeTimeouts=[];const r=[];for(let s=0;s<n.length;s+=1)n[s]=x(n[s],t),r.push(s);return e.resizeObserver=null,e.resizeElementRef=g.createRef(),e.state={index:-1,upperBound:0,sliderLength:0,value:n,zIndices:r},e}H(l,i);var o=l.prototype;return o.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},l.getDerivedStateFromProps=function(t,e){const n=P(t.value);return n.length?e.pending?null:{value:n.map(r=>x(r,t))}:null},o.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},o.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},o.onEnd=function(t){t&&function(e){Object.keys(e).forEach(n=>{typeof document<"u"&&document.removeEventListener(n,e[n],!1)})}(t),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},o.getValue=function(){return y(this.state.value)},o.getClosestIndex=function(t){let e=Number.MAX_VALUE,n=-1;const{value:r}=this.state,s=r.length;for(let c=0;c<s;c+=1){const u=this.calcOffset(r[c]),p=Math.abs(t-u);p<e&&(e=p,n=c)}return n},o.getMousePosition=function(t){return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},o.getTouchPosition=function(t){const e=t.touches[0];return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},o.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},o.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},o.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},o.getValueFromPosition=function(t){const e=t/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return x(this.state.startValue+e,this.props)},o.getDiffPosition=function(t){let e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},o.resize=function(){const{slider:t,thumb0:e}=this;if(!t||!e)return;const n=this.sizeKey(),r=t.getBoundingClientRect(),s=t[n],c=r[this.posMaxKey()],u=r[this.posMinKey()],p=e.getBoundingClientRect()[n.replace("client","").toLowerCase()],h=s-p,d=Math.abs(c-u);this.state.upperBound===h&&this.state.sliderLength===d&&this.state.thumbSize===p||this.setState({upperBound:h,sliderLength:d,thumbSize:p})},o.calcOffset=function(t){const e=this.props.max-this.props.min;return e===0?0:(t-this.props.min)/e*this.state.upperBound},o.calcValue=function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},o.calcOffsetFromPosition=function(t){const{slider:e}=this,n=e.getBoundingClientRect(),r=n[this.posMaxKey()],s=n[this.posMinKey()];let c=t-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?r:s));return this.props.invert&&(c=this.state.sliderLength-c),c-=this.state.thumbSize/2,c},o.forceValueFromPosition=function(t,e){const n=this.calcOffsetFromPosition(t),r=this.getClosestIndex(n),s=x(this.calcValue(n),this.props),c=this.state.value.slice();c[r]=s;for(let u=0;u<c.length-1;u+=1)if(c[u+1]-c[u]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:c},()=>{e(r),this.fireChangeEvent("onChange")})},o.clearPendingResizeTimeouts=function(){do{const t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},o.start=function(t,e){const n=this["thumb"+t];n&&n.focus();const{zIndices:r}=this.state;r.splice(r.indexOf(t),1),r.push(t),this.setState(s=>({startValue:s.value[t],startPosition:e!==void 0?e:s.startPosition,index:t,zIndices:r}))},o.moveUpByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e-t:e+t,this.props);this.move(Math.min(n,this.props.max))},o.moveDownByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e+t:e-t,this.props);this.move(Math.max(n,this.props.min))},o.move=function(t){const e=this.state.value.slice(),{index:n}=this.state,{length:r}=e,s=e[n];if(t===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:c,max:u,min:p,minDistance:h}=this.props;if(!c){if(n>0){const d=e[n-1];t<d+h&&(t=d+h)}if(n<r-1){const d=e[n+1];t>d-h&&(t=d-h)}}e[n]=t,c&&r>1&&(t>s?(this.pushSucceeding(e,h,n),function(d,v,M,j){for(let f=0;f<d;f+=1){const b=j-f*M;v[d-1-f]>b&&(v[d-1-f]=b)}}(r,e,h,u)):t<s&&(this.pushPreceding(e,h,n),function(d,v,M,j){for(let f=0;f<d;f+=1){const b=j+f*M;v[f]<b&&(v[f]=b)}}(r,e,h,p))),this.setState({value:e},this.fireChangeEvent.bind(this,"onChange"))},o.pushSucceeding=function(t,e,n){let r,s;for(r=n,s=t[r]+e;t[r+1]!==null&&s>t[r+1];r+=1,s=t[r]+e)t[r+1]=D(s,this.props)},o.pushPreceding=function(t,e,n){for(let r=n,s=t[r]-e;t[r-1]!==null&&s<t[r-1];r-=1,s=t[r]-e)t[r-1]=D(s,this.props)},o.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},o.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},o.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},o.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},o.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},o.fireChangeEvent=function(t){this.props[t]&&this.props[t](y(this.state.value),this.state.index)},o.buildThumbStyle=function(t,e){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(e)+1};return n[this.posMinKey()]=t+"px",n},o.buildTrackStyle=function(t,e){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=t,n[this.posMaxKey()]=e,n},o.buildMarkStyle=function(t){var e;return(e={position:"absolute"})[this.posMinKey()]=t,e},o.renderThumbs=function(t){const{length:e}=t,n=[];for(let s=0;s<e;s+=1)n[s]=this.buildThumbStyle(t[s],s);const r=[];for(let s=0;s<e;s+=1)r[s]=this.renderThumb(n[s],s);return r},o.renderTracks=function(t){const e=[],n=t.length-1;e.push(this.renderTrack(0,0,t[0]));for(let r=0;r<n;r+=1)e.push(this.renderTrack(r+1,t[r],t[r+1]));return e.push(this.renderTrack(n+1,t[n],this.state.upperBound)),e},o.renderMarks=function(){let{marks:t}=this.props;const e=this.props.max-this.props.min+1;return typeof t=="boolean"?t=Array.from({length:e}).map((n,r)=>r):typeof t=="number"&&(t=Array.from({length:e}).map((n,r)=>r).filter(n=>n%t==0)),t.map(parseFloat).sort((n,r)=>n-r).map(n=>{const r=this.calcOffset(n),s={key:n,className:this.props.markClassName,style:this.buildMarkStyle(r)};return this.props.renderMark(s)})},o.render=function(){const t=[],{value:e}=this.state,n=e.length;for(let u=0;u<n;u+=1)t[u]=this.calcOffset(e[u],u);const r=this.props.withTracks?this.renderTracks(t):null,s=this.renderThumbs(t),c=this.props.marks?this.renderMarks():null;return g.createElement("div",{ref:u=>{this.slider=u,this.resizeElementRef.current=u},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},r,s,c)},l}(g.Component);T.displayName="ReactSlider",T.defaultProps={min:0,max:100,step:1,pageFn:i=>10*i,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:i=>g.createElement("div",i),renderTrack:i=>g.createElement("div",i),renderMark:i=>g.createElement("span",i)};var X=T;const $=({onRangeChange:i,min:l,max:o,initialMin:t,initialMax:e,title:n})=>{const[r,s]=m.useState([t,e]);return m.useEffect(()=>{i(r)},[r]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"slider-container",children:[a.jsx("label",{className:"text-white flex",children:n}),a.jsxs("div",{className:"range-labels",children:[a.jsx("span",{children:r[0]}),a.jsx("span",{children:r[1]})]}),a.jsx(X,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",value:r,min:l,max:o,step:5,onChange:c=>s(c),ariaLabel:["Lower thumb","Upper thumb"]})]})})},z=({value:i,setValue:l,min:o,max:t})=>(m.useEffect(()=>{i<o?l(o):i>t&&l(t)},[i]),a.jsxs("div",{className:"scan relative w-[10rem] mr-5",children:[a.jsx(C.Input,{type:"number",value:i,onChange:e=>l(e.target.value),className:"!border-t-blue-gray-200 text-white placeholder:text-blue-gray-300 placeholder:opacity-100  focus:!border-t-gray-900 appearance-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",labelProps:{className:"before:content-none after:content-none"},containerProps:{className:"min-w-0"}}),a.jsxs("div",{className:"absolute right-1 top-1 flex gap-0.5",children:[a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)<o?0:Number.parseInt(e)-1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})})}),a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)>t?0:Number.parseInt(e)+1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})})})]})]})),G=()=>{const i=w(),l=N(h=>h.scanner.config),[o,t]=m.useState(l.minPrice),[e,n]=m.useState(l.maxPrice),[r,s]=m.useState(l.minChange),[c,u]=m.useState(l.maxChange),p=h=>{const[d,v]=h;s(d),u(v)};return m.useEffect(()=>{i(K({minPrice:o,maxPrice:e,minChange:r,maxChange:c}))},[o,e,r,c]),a.jsx("div",{className:"flex",children:a.jsxs("div",{className:"w-[100%] pb-3",children:[a.jsx("h5",{className:"ml-5 mt-1",children:"Historical Scanner"}),a.jsxs("div",{className:"flex m-[1.5rem] ",children:[a.jsx("label",{className:"mr-5  w-[2.5rem] text-xs",children:"Price"}),a.jsx(z,{value:o,setValue:t,min:0,max:2999}),a.jsx(z,{value:e,setValue:n,min:1,max:3e3})]}),a.jsxs("div",{className:"flex m-[1.5rem]",children:[a.jsx("label",{className:"mr-5 w-[2.5rem] text-xs",children:"Change"}),a.jsx($,{title:"",onRangeChange:p,min:-50,max:1e3,initialMin:r,initialMax:c})]})]})})},W=({scanResults:i})=>{const l=w(),o=R(),t=async()=>{const e=O(i.map(n=>n.symbol));l(B("news")),o("/tiingo",{state:e})};return a.jsx("div",{className:"flex",children:a.jsx("div",{className:"flex  hover:cursor-pointer pl-3 pt-3",onClick:t,children:a.jsxs("div",{className:"view-all-button",children:[a.jsx(_,{}),a.jsxs("span",{className:"text ml-1",children:[a.jsx("span",{className:"text-green",children:"Current"})," News"]})]})})})},Y=({stocks:i,setSortedStocks:l})=>{const[o,t]=m.useState(!1),[e,n]=m.useState(!1);m.useEffect(()=>{l([...i])},[i]);const r=()=>{t(!o);const c=i.sort((u,p)=>o?u.percent-p.percent:p.percent-u.percent);l([...c])},s=()=>{n(!e);const c=i.sort((u,p)=>e?u.volume-p.volume:p.volume-u.volume);l([...c])};return a.jsxs("div",{className:"stock-list__header",children:[a.jsx("div",{className:"column",children:"Symbol"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:s,children:["Volume",a.jsx("span",{className:"sort-icon",children:"⇅"})]}),a.jsx("div",{className:"column",children:"Price"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:r,children:["% Change",a.jsx("span",{className:"sort-icon",children:"⇅"})]})]})},Z="bg-[#2A4037] text-[#07F8B5] rounded p-1 w-50",q="bg-[#490517] text-[#FF5361] rounded p-1 w-50",Q=({stock:i})=>{const l=w(),o=R(),t=n=>n.isPositive?a.jsxs("span",{className:`text-lg ${Z}`,children:[n.percent.toFixed(2),"%"]}):a.jsxs("span",{className:` text-lg ${q}`,children:[n.percent.toFixed(2),"%"]}),e=n=>{l(F(n)),o("/news")};return a.jsx("div",{children:a.jsxs("li",{className:"stock-list__item",onClick:()=>e(i),children:[a.jsx("div",{className:"column",children:i.symbol}),a.jsx("div",{className:"column text-slate-400",children:i.volume.toLocaleString()}),a.jsx("div",{className:"column",children:i.vw}),a.jsx("div",{className:`column ${i.isPositive?"positive":"negative"}`,children:(i==null?void 0:i.percent)&&t(i)})]},i.symbol)})},J=({rootMargin:i="0px",threshold:l=.1}={})=>{const[o,t]=m.useState(!1),e=m.useRef(null),n=m.useRef(null);return m.useEffect(()=>{if(n.current){const r=new IntersectionObserver(([s])=>{t(s.isIntersecting)},{root,rootMargin:i,threshold:l});e.current&&r.observe(e.current)}return()=>{e.current&&n.current&&observer.unobserve(e.current)}},[n,i,l]),[e,n,o]},ee=({stocks:i})=>{m.useRef(null);const[l,o]=m.useState(i),[t,e,n]=J();return m.useEffect(()=>{n&&console.log("isIntersecting")},[n]),a.jsx("div",{className:"ml-1 md:m-3 mr-1",children:a.jsxs("div",{className:"stock-list",children:[a.jsx(Y,{stocks:i,setSortedStocks:o}),a.jsx("ul",{className:"stock-list__body",children:l.map((r,s)=>a.jsxs(a.Fragment,{children:[a.jsx(Q,{stock:r},r.symbol),i.length-10===s&&a.jsx("div",{ref:e})]}))}),a.jsx("div",{ref:t,className:"intersection-observer"})]})})},te=()=>{const i=w(),l=N(p=>p.scanner.config),[o,t]=g.useState([]),e=N(p=>p.stocks.date),[n,r]=g.useState(1),{data:s=[],error:c,isLoading:u}=A({date:e,page:n});return m.useEffect(()=>{if(s&&!u){const p=s==null?void 0:s.stocks.filter(I(l));i(L(p)),t([...p])}},[l,s]),a.jsxs("div",{children:[a.jsx(W,{scanResults:o}),u?a.jsx(V,{}):a.jsx("div",{children:a.jsx(ee,{stocks:o})})]})},se=({children:i})=>a.jsx("div",{className:"gradient border-b border-green",children:i}),ae=()=>{const i=N(l=>l.historicalData.hasError);return a.jsx("div",{children:i?a.jsx(U,{}):a.jsxs(a.Fragment,{children:[a.jsx(se,{children:a.jsx(G,{})}),a.jsx(te,{})]})})};export{ae as default};
//# sourceMappingURL=Scanner-CFPfXu15.js.map
