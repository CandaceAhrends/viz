import{R as g,r as m,j as c,d as M,b as w,n as F,k as K,o as O,m as R,p as B,q as A,v as L,w as I,x as V,E as _}from"./index-BXfNfdmS.js";import{r as C}from"./index-DKJxXZDc.js";import U from"./ViewSvg-BCgv50W3.js";import"./index-BKNjMPK8.js";function E(r,u){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},E(r,u)}function H(r,u){r.prototype=Object.create(u.prototype),r.prototype.constructor=r,E(r,u)}function k(r){return r&&r.stopPropagation&&r.stopPropagation(),r&&r.preventDefault&&r.preventDefault(),!1}function P(r){return r==null?[]:Array.isArray(r)?r.slice():[r]}function y(r){return r!==null&&r.length===1?r[0]:r.slice()}function S(r){Object.keys(r).forEach(u=>{typeof document<"u"&&document.addEventListener(u,r[u],!1)})}function x(r,u){return T(function(a,t){let e=a;return e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e}(r,u),u)}function T(r,u){const a=(r-u.min)%u.step;let t=r-a;return 2*Math.abs(a)>=u.step&&(t+=a>0?u.step:-u.step),parseFloat(t.toFixed(5))}let D=function(r){function u(t){var e;(e=r.call(this,t)||this).onKeyUp=()=>{e.onEnd()},e.onMouseUp=()=>{e.onEnd(e.getMouseEventMap())},e.onTouchEnd=s=>{s.preventDefault(),e.onEnd(e.getTouchEventMap())},e.onBlur=()=>{e.setState({index:-1},e.onEnd(e.getKeyDownEventMap()))},e.onMouseMove=s=>{e.setState({pending:!0});const o=e.getMousePosition(s),l=e.getDiffPosition(o[0]),d=e.getValueFromPosition(l);e.move(d)},e.onTouchMove=s=>{if(s.touches.length>1)return;e.setState({pending:!0});const o=e.getTouchPosition(s);if(e.isScrolling===void 0){const h=o[0]-e.startPosition[0],p=o[1]-e.startPosition[1];e.isScrolling=Math.abs(p)>Math.abs(h)}if(e.isScrolling)return void e.setState({index:-1});const l=e.getDiffPosition(o[0]),d=e.getValueFromPosition(l);e.move(d)},e.onKeyDown=s=>{if(!(s.ctrlKey||s.shiftKey||s.altKey||s.metaKey))switch(e.setState({pending:!0}),s.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":s.preventDefault(),e.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":s.preventDefault(),e.moveUpByStep();break;case"Home":s.preventDefault(),e.move(e.props.min);break;case"End":s.preventDefault(),e.move(e.props.max);break;case"PageDown":s.preventDefault(),e.moveDownByStep(e.props.pageFn(e.props.step));break;case"PageUp":s.preventDefault(),e.moveUpByStep(e.props.pageFn(e.props.step))}},e.onSliderMouseDown=s=>{if(!e.props.disabled&&s.button!==2){if(e.setState({pending:!0}),!e.props.snapDragDisabled){const o=e.getMousePosition(s);e.forceValueFromPosition(o[0],l=>{e.start(l,o[0]),S(e.getMouseEventMap())})}k(s)}},e.onSliderClick=s=>{if(!e.props.disabled&&e.props.onSliderClick&&!e.hasMoved){const o=e.getMousePosition(s),l=x(e.calcValue(e.calcOffsetFromPosition(o[0])),e.props);e.props.onSliderClick(l)}},e.createOnKeyDown=s=>o=>{e.props.disabled||(e.start(s),S(e.getKeyDownEventMap()),k(o))},e.createOnMouseDown=s=>o=>{if(e.props.disabled||o.button===2)return;e.setState({pending:!0});const l=e.getMousePosition(o);e.start(s,l[0]),S(e.getMouseEventMap()),k(o)},e.createOnTouchStart=s=>o=>{if(e.props.disabled||o.touches.length>1)return;e.setState({pending:!0});const l=e.getTouchPosition(o);e.startPosition=l,e.isScrolling=void 0,e.start(s,l[0]),S(e.getTouchEventMap()),function(d){d.stopPropagation&&d.stopPropagation()}(o)},e.handleResize=()=>{const s=window.setTimeout(()=>{e.pendingResizeTimeouts.shift(),e.resize()},0);e.pendingResizeTimeouts.push(s)},e.renderThumb=(s,o)=>{const l=e.props.thumbClassName+" "+e.props.thumbClassName+"-"+o+" "+(e.state.index===o?e.props.thumbActiveClassName:""),d={ref:p=>{e["thumb"+o]=p},key:e.props.thumbClassName+"-"+o,className:l,style:s,onMouseDown:e.createOnMouseDown(o),onTouchStart:e.createOnTouchStart(o),onFocus:e.createOnKeyDown(o),tabIndex:0,role:"slider","aria-orientation":e.props.orientation,"aria-valuenow":e.state.value[o],"aria-valuemin":e.props.min,"aria-valuemax":e.props.max,"aria-label":Array.isArray(e.props.ariaLabel)?e.props.ariaLabel[o]:e.props.ariaLabel,"aria-labelledby":Array.isArray(e.props.ariaLabelledby)?e.props.ariaLabelledby[o]:e.props.ariaLabelledby,"aria-disabled":e.props.disabled},h={index:o,value:y(e.state.value),valueNow:e.state.value[o]};return e.props.ariaValuetext&&(d["aria-valuetext"]=typeof e.props.ariaValuetext=="string"?e.props.ariaValuetext:e.props.ariaValuetext(h)),e.props.renderThumb(d,h)},e.renderTrack=(s,o,l)=>{const d={key:e.props.trackClassName+"-"+s,className:e.props.trackClassName+" "+e.props.trackClassName+"-"+s,style:e.buildTrackStyle(o,e.state.upperBound-l)},h={index:s,value:y(e.state.value)};return e.props.renderTrack(d,h)};let i=P(t.value);i.length||(i=P(t.defaultValue)),e.pendingResizeTimeouts=[];const n=[];for(let s=0;s<i.length;s+=1)i[s]=x(i[s],t),n.push(s);return e.resizeObserver=null,e.resizeElementRef=g.createRef(),e.state={index:-1,upperBound:0,sliderLength:0,value:i,zIndices:n},e}H(u,r);var a=u.prototype;return a.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},u.getDerivedStateFromProps=function(t,e){const i=P(t.value);return i.length?e.pending?null:{value:i.map(n=>x(n,t))}:null},a.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},a.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},a.onEnd=function(t){t&&function(e){Object.keys(e).forEach(i=>{typeof document<"u"&&document.removeEventListener(i,e[i],!1)})}(t),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},a.getValue=function(){return y(this.state.value)},a.getClosestIndex=function(t){let e=Number.MAX_VALUE,i=-1;const{value:n}=this.state,s=n.length;for(let o=0;o<s;o+=1){const l=this.calcOffset(n[o]),d=Math.abs(t-l);d<e&&(e=d,i=o)}return i},a.getMousePosition=function(t){return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},a.getTouchPosition=function(t){const e=t.touches[0];return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},a.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},a.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},a.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},a.getValueFromPosition=function(t){const e=t/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return x(this.state.startValue+e,this.props)},a.getDiffPosition=function(t){let e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},a.resize=function(){const{slider:t,thumb0:e}=this;if(!t||!e)return;const i=this.sizeKey(),n=t.getBoundingClientRect(),s=t[i],o=n[this.posMaxKey()],l=n[this.posMinKey()],d=e.getBoundingClientRect()[i.replace("client","").toLowerCase()],h=s-d,p=Math.abs(o-l);this.state.upperBound===h&&this.state.sliderLength===p&&this.state.thumbSize===d||this.setState({upperBound:h,sliderLength:p,thumbSize:d})},a.calcOffset=function(t){const e=this.props.max-this.props.min;return e===0?0:(t-this.props.min)/e*this.state.upperBound},a.calcValue=function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},a.calcOffsetFromPosition=function(t){const{slider:e}=this,i=e.getBoundingClientRect(),n=i[this.posMaxKey()],s=i[this.posMinKey()];let o=t-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?n:s));return this.props.invert&&(o=this.state.sliderLength-o),o-=this.state.thumbSize/2,o},a.forceValueFromPosition=function(t,e){const i=this.calcOffsetFromPosition(t),n=this.getClosestIndex(i),s=x(this.calcValue(i),this.props),o=this.state.value.slice();o[n]=s;for(let l=0;l<o.length-1;l+=1)if(o[l+1]-o[l]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:o},()=>{e(n),this.fireChangeEvent("onChange")})},a.clearPendingResizeTimeouts=function(){do{const t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},a.start=function(t,e){const i=this["thumb"+t];i&&i.focus();const{zIndices:n}=this.state;n.splice(n.indexOf(t),1),n.push(t),this.setState(s=>({startValue:s.value[t],startPosition:e!==void 0?e:s.startPosition,index:t,zIndices:n}))},a.moveUpByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],i=x(this.props.invert&&this.props.orientation==="horizontal"?e-t:e+t,this.props);this.move(Math.min(i,this.props.max))},a.moveDownByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],i=x(this.props.invert&&this.props.orientation==="horizontal"?e+t:e-t,this.props);this.move(Math.max(i,this.props.min))},a.move=function(t){const e=this.state.value.slice(),{index:i}=this.state,{length:n}=e,s=e[i];if(t===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:o,max:l,min:d,minDistance:h}=this.props;if(!o){if(i>0){const p=e[i-1];t<p+h&&(t=p+h)}if(i<n-1){const p=e[i+1];t>p-h&&(t=p-h)}}e[i]=t,o&&n>1&&(t>s?(this.pushSucceeding(e,h,i),function(p,v,N,j){for(let f=0;f<p;f+=1){const b=j-f*N;v[p-1-f]>b&&(v[p-1-f]=b)}}(n,e,h,l)):t<s&&(this.pushPreceding(e,h,i),function(p,v,N,j){for(let f=0;f<p;f+=1){const b=j+f*N;v[f]<b&&(v[f]=b)}}(n,e,h,d))),this.setState({value:e},this.fireChangeEvent.bind(this,"onChange"))},a.pushSucceeding=function(t,e,i){let n,s;for(n=i,s=t[n]+e;t[n+1]!==null&&s>t[n+1];n+=1,s=t[n]+e)t[n+1]=T(s,this.props)},a.pushPreceding=function(t,e,i){for(let n=i,s=t[n]-e;t[n-1]!==null&&s<t[n-1];n-=1,s=t[n]-e)t[n-1]=T(s,this.props)},a.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},a.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},a.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},a.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},a.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},a.fireChangeEvent=function(t){this.props[t]&&this.props[t](y(this.state.value),this.state.index)},a.buildThumbStyle=function(t,e){const i={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(e)+1};return i[this.posMinKey()]=t+"px",i},a.buildTrackStyle=function(t,e){const i={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return i[this.posMinKey()]=t,i[this.posMaxKey()]=e,i},a.buildMarkStyle=function(t){var e;return(e={position:"absolute"})[this.posMinKey()]=t,e},a.renderThumbs=function(t){const{length:e}=t,i=[];for(let s=0;s<e;s+=1)i[s]=this.buildThumbStyle(t[s],s);const n=[];for(let s=0;s<e;s+=1)n[s]=this.renderThumb(i[s],s);return n},a.renderTracks=function(t){const e=[],i=t.length-1;e.push(this.renderTrack(0,0,t[0]));for(let n=0;n<i;n+=1)e.push(this.renderTrack(n+1,t[n],t[n+1]));return e.push(this.renderTrack(i+1,t[i],this.state.upperBound)),e},a.renderMarks=function(){let{marks:t}=this.props;const e=this.props.max-this.props.min+1;return typeof t=="boolean"?t=Array.from({length:e}).map((i,n)=>n):typeof t=="number"&&(t=Array.from({length:e}).map((i,n)=>n).filter(i=>i%t==0)),t.map(parseFloat).sort((i,n)=>i-n).map(i=>{const n=this.calcOffset(i),s={key:i,className:this.props.markClassName,style:this.buildMarkStyle(n)};return this.props.renderMark(s)})},a.render=function(){const t=[],{value:e}=this.state,i=e.length;for(let l=0;l<i;l+=1)t[l]=this.calcOffset(e[l],l);const n=this.props.withTracks?this.renderTracks(t):null,s=this.renderThumbs(t),o=this.props.marks?this.renderMarks():null;return g.createElement("div",{ref:l=>{this.slider=l,this.resizeElementRef.current=l},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},n,s,o)},u}(g.Component);D.displayName="ReactSlider",D.defaultProps={min:0,max:100,step:1,pageFn:r=>10*r,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:r=>g.createElement("div",r),renderTrack:r=>g.createElement("div",r),renderMark:r=>g.createElement("span",r)};var X=D;const $=({onRangeChange:r,min:u,max:a,initialMin:t,initialMax:e,title:i})=>{const[n,s]=m.useState([t,e]);return m.useEffect(()=>{r(n)},[n]),c.jsx(c.Fragment,{children:c.jsxs("div",{className:"slider-container",children:[c.jsx("label",{className:"text-white flex",children:i}),c.jsxs("div",{className:"range-labels",children:[c.jsx("span",{children:n[0]}),c.jsx("span",{children:n[1]})]}),c.jsx(X,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",value:n,min:u,max:a,step:5,onChange:o=>s(o),ariaLabel:["Lower thumb","Upper thumb"]})]})})},z=({value:r,setValue:u,min:a,max:t})=>(m.useEffect(()=>{r<a?u(a):r>t&&u(t)},[r]),c.jsxs("div",{className:"scan relative w-[10rem] mr-5",children:[c.jsx(C.Input,{type:"number",value:r,onChange:e=>u(e.target.value),className:"!border-t-blue-gray-200 text-white placeholder:text-blue-gray-300 placeholder:opacity-100  focus:!border-t-gray-900 appearance-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",labelProps:{className:"before:content-none after:content-none"},containerProps:{className:"min-w-0"}}),c.jsxs("div",{className:"absolute right-1 top-1 flex gap-0.5",children:[c.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>u(e=>Number.parseInt(e)<a?0:Number.parseInt(e)-1),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:c.jsx("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})})}),c.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>u(e=>Number.parseInt(e)>t?0:Number.parseInt(e)+1),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:c.jsx("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})})})]})]})),q=()=>{const r=M(),u=w(h=>h.scanner.config),[a,t]=m.useState(u.minPrice),[e,i]=m.useState(u.maxPrice),[n,s]=m.useState(u.minChange),[o,l]=m.useState(u.maxChange),d=h=>{const[p,v]=h;s(p),l(v)};return m.useEffect(()=>{r(F({minPrice:a,maxPrice:e,minChange:n,maxChange:o}))},[a,e,n,o]),c.jsx("div",{className:"flex",children:c.jsxs("div",{className:"w-[100%] pb-3",children:[c.jsx("h5",{className:"ml-5 mt-1",children:"Historical Scanner"}),c.jsxs("div",{className:"flex m-[1.5rem] ",children:[c.jsx("label",{className:"mr-5  w-[2.5rem] text-xs",children:"Price"}),c.jsx(z,{value:a,setValue:t,min:0,max:2999}),c.jsx(z,{value:e,setValue:i,min:1,max:3e3})]}),c.jsxs("div",{className:"flex m-[1.5rem]",children:[c.jsx("label",{className:"mr-5 w-[2.5rem] text-xs",children:"Change"}),c.jsx($,{title:"",onRangeChange:d,min:-50,max:1e3,initialMin:n,initialMax:o})]})]})})},G=({stocks:r})=>{const u=M(),a=K(),t=async()=>{const e=O(r.map(i=>i.symbol));u(R("news")),a("/tiingo",{state:e})};return c.jsx("div",{className:"flex",children:c.jsx("div",{className:"flex  hover:cursor-pointer pl-3 pt-3",onClick:t,children:c.jsxs("div",{className:"view-all-button",children:[c.jsx(U,{}),c.jsxs("span",{className:"text ml-1",children:[c.jsx("span",{className:"text-green",children:"Current"})," News"]})]})})})},W=({stocks:r,setSortedStocks:u})=>{const[a,t]=m.useState(!1),[e,i]=m.useState(!1);m.useEffect(()=>{u([...r])},[r]);const n=()=>{t(!a),u([...[...r].sort((o,l)=>a?(o==null?void 0:o.percent)-(l==null?void 0:l.percent):(l==null?void 0:l.percent)-(o==null?void 0:o.percent))])},s=()=>{i(!e),u([...[...r].sort((o,l)=>e?(o==null?void 0:o.volume)-(l==null?void 0:l.volume):(l==null?void 0:l.volume)-(o==null?void 0:o.volume))])};return c.jsxs("div",{className:"stock-list__header",children:[c.jsx("div",{className:"column",children:"Symbol"}),c.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:s,children:["Volume",c.jsx("span",{className:"sort-icon",children:"⇅"})]}),c.jsx("div",{className:"column",children:"Price"}),c.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:n,children:["% Change",c.jsx("span",{className:"sort-icon",children:"⇅"})]})]})},Y="bg-[#2A4037] text-[#07F8B5] rounded p-1 w-50",Z="bg-[#490517] text-[#FF5361] rounded p-1 w-50",Q=({stock:r})=>{var i;const u=M(),a=K(),t=n=>n.isPositive?c.jsxs("span",{className:`text-lg ${Y}`,children:[n.percent.toFixed(2),"%"]}):c.jsxs("span",{className:` text-lg ${Z}`,children:[n.percent.toFixed(2),"%"]}),e=n=>{u(B(n)),a("/news")};return c.jsx("div",{children:c.jsxs("li",{className:"stock-list__item",onClick:()=>e(r),children:[c.jsx("div",{className:"column",children:r.symbol}),c.jsx("div",{className:"column text-slate-400",children:r.volume.toLocaleString()}),c.jsx("div",{className:"column",children:(i=r.vw)==null?void 0:i.toFixed(2)}),c.jsx("div",{className:`column ${r.isPositive?"positive":"negative"}`,children:(r==null?void 0:r.percent)&&t(r)})]},r.symbol)})},J=()=>{const[r,u]=m.useState(!1),a=m.useRef(null);return m.useEffect(()=>{let t;return a.current&&(console.log("we haev REFF"),t=new IntersectionObserver(([e])=>{u(e.isIntersecting)},{}),t.observe(a.current)),()=>{a.current&&t&&t.unobserve(a.current)}},[a.current]),[a,r]},ee=({stocks:r,setPage:u})=>{const[a,t]=m.useState(r),[e,i]=J();return m.useEffect(()=>{i&&u(n=>n<2?n+1:n)},[i]),m.useEffect(()=>{e.current=document.querySelector(".stock-list__body")},[]),c.jsx("div",{className:"ml-1 md:m-3 mr-1",children:c.jsxs("div",{className:"stock-list",children:[c.jsx(W,{stocks:r,setSortedStocks:t}),c.jsx("ul",{className:"stock-list__body",children:a.map((n,s)=>c.jsxs(c.Fragment,{children:[a.length-1===s&&c.jsx("div",{style:{height:"1rem",display:"flex",justifyContent:"center"},ref:e}),c.jsx(Q,{stock:n},n.symbol)]}))})]})})},te=()=>{const r=M(),u=w(p=>p.scanner.config),[a,t]=g.useState([]),[e,i]=g.useState([]),n=w(p=>p.stocks.date),[s,o]=g.useState(1),{data:l=[],error:d,isLoading:h}=A({date:n,page:s,sortType:"desc"});return m.useEffect(()=>{l&&!h&&t([...a,...l==null?void 0:l.stocks])},[l]),m.useEffect(()=>{if(a.length){const p=a.filter(L(u));i(p),r(I(p))}},[u,a]),c.jsxs("div",{children:[c.jsx(G,{stocks:e}),h?c.jsx(V,{}):c.jsx("div",{children:c.jsx(ee,{stocks:e,setPage:o})})]})},se=({children:r})=>c.jsx("div",{className:"gradient border-b border-green",children:r}),ae=()=>{const r=w(u=>u.historicalData.hasError);return c.jsx("div",{children:r?c.jsx(_,{}):c.jsxs(c.Fragment,{children:[c.jsx(se,{children:c.jsx(q,{})}),c.jsx(te,{})]})})};export{ae as default};
//# sourceMappingURL=Scanner-DKjWdyVi.js.map
