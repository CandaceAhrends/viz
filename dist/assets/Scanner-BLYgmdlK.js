import{R as v,r as m,j as a,d as S,b as y,n as E,k as O,o as F,m as R,p as B,q as A,v as L,w as I,x as V,y as _,E as U}from"./index-fA7Q8ziN.js";import{r as C}from"./index-Dm4oymNd.js";import H from"./ViewSvg-xIThu-Mp.js";import"./index-BKNjMPK8.js";function T(o,l){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},T(o,l)}function X(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,T(o,l)}function k(o){return o&&o.stopPropagation&&o.stopPropagation(),o&&o.preventDefault&&o.preventDefault(),!1}function P(o){return o==null?[]:Array.isArray(o)?o.slice():[o]}function M(o){return o!==null&&o.length===1?o[0]:o.slice()}function w(o){Object.keys(o).forEach(l=>{typeof document<"u"&&document.addEventListener(l,o[l],!1)})}function x(o,l){return D(function(r,t){let e=r;return e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e}(o,l),l)}function D(o,l){const r=(o-l.min)%l.step;let t=o-r;return 2*Math.abs(r)>=l.step&&(t+=r>0?l.step:-l.step),parseFloat(t.toFixed(5))}let z=function(o){function l(t){var e;(e=o.call(this,t)||this).onKeyUp=()=>{e.onEnd()},e.onMouseUp=()=>{e.onEnd(e.getMouseEventMap())},e.onTouchEnd=s=>{s.preventDefault(),e.onEnd(e.getTouchEventMap())},e.onBlur=()=>{e.setState({index:-1},e.onEnd(e.getKeyDownEventMap()))},e.onMouseMove=s=>{e.setState({pending:!0});const c=e.getMousePosition(s),u=e.getDiffPosition(c[0]),d=e.getValueFromPosition(u);e.move(d)},e.onTouchMove=s=>{if(s.touches.length>1)return;e.setState({pending:!0});const c=e.getTouchPosition(s);if(e.isScrolling===void 0){const h=c[0]-e.startPosition[0],p=c[1]-e.startPosition[1];e.isScrolling=Math.abs(p)>Math.abs(h)}if(e.isScrolling)return void e.setState({index:-1});const u=e.getDiffPosition(c[0]),d=e.getValueFromPosition(u);e.move(d)},e.onKeyDown=s=>{if(!(s.ctrlKey||s.shiftKey||s.altKey||s.metaKey))switch(e.setState({pending:!0}),s.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":s.preventDefault(),e.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":s.preventDefault(),e.moveUpByStep();break;case"Home":s.preventDefault(),e.move(e.props.min);break;case"End":s.preventDefault(),e.move(e.props.max);break;case"PageDown":s.preventDefault(),e.moveDownByStep(e.props.pageFn(e.props.step));break;case"PageUp":s.preventDefault(),e.moveUpByStep(e.props.pageFn(e.props.step))}},e.onSliderMouseDown=s=>{if(!e.props.disabled&&s.button!==2){if(e.setState({pending:!0}),!e.props.snapDragDisabled){const c=e.getMousePosition(s);e.forceValueFromPosition(c[0],u=>{e.start(u,c[0]),w(e.getMouseEventMap())})}k(s)}},e.onSliderClick=s=>{if(!e.props.disabled&&e.props.onSliderClick&&!e.hasMoved){const c=e.getMousePosition(s),u=x(e.calcValue(e.calcOffsetFromPosition(c[0])),e.props);e.props.onSliderClick(u)}},e.createOnKeyDown=s=>c=>{e.props.disabled||(e.start(s),w(e.getKeyDownEventMap()),k(c))},e.createOnMouseDown=s=>c=>{if(e.props.disabled||c.button===2)return;e.setState({pending:!0});const u=e.getMousePosition(c);e.start(s,u[0]),w(e.getMouseEventMap()),k(c)},e.createOnTouchStart=s=>c=>{if(e.props.disabled||c.touches.length>1)return;e.setState({pending:!0});const u=e.getTouchPosition(c);e.startPosition=u,e.isScrolling=void 0,e.start(s,u[0]),w(e.getTouchEventMap()),function(d){d.stopPropagation&&d.stopPropagation()}(c)},e.handleResize=()=>{const s=window.setTimeout(()=>{e.pendingResizeTimeouts.shift(),e.resize()},0);e.pendingResizeTimeouts.push(s)},e.renderThumb=(s,c)=>{const u=e.props.thumbClassName+" "+e.props.thumbClassName+"-"+c+" "+(e.state.index===c?e.props.thumbActiveClassName:""),d={ref:p=>{e["thumb"+c]=p},key:e.props.thumbClassName+"-"+c,className:u,style:s,onMouseDown:e.createOnMouseDown(c),onTouchStart:e.createOnTouchStart(c),onFocus:e.createOnKeyDown(c),tabIndex:0,role:"slider","aria-orientation":e.props.orientation,"aria-valuenow":e.state.value[c],"aria-valuemin":e.props.min,"aria-valuemax":e.props.max,"aria-label":Array.isArray(e.props.ariaLabel)?e.props.ariaLabel[c]:e.props.ariaLabel,"aria-labelledby":Array.isArray(e.props.ariaLabelledby)?e.props.ariaLabelledby[c]:e.props.ariaLabelledby,"aria-disabled":e.props.disabled},h={index:c,value:M(e.state.value),valueNow:e.state.value[c]};return e.props.ariaValuetext&&(d["aria-valuetext"]=typeof e.props.ariaValuetext=="string"?e.props.ariaValuetext:e.props.ariaValuetext(h)),e.props.renderThumb(d,h)},e.renderTrack=(s,c,u)=>{const d={key:e.props.trackClassName+"-"+s,className:e.props.trackClassName+" "+e.props.trackClassName+"-"+s,style:e.buildTrackStyle(c,e.state.upperBound-u)},h={index:s,value:M(e.state.value)};return e.props.renderTrack(d,h)};let n=P(t.value);n.length||(n=P(t.defaultValue)),e.pendingResizeTimeouts=[];const i=[];for(let s=0;s<n.length;s+=1)n[s]=x(n[s],t),i.push(s);return e.resizeObserver=null,e.resizeElementRef=v.createRef(),e.state={index:-1,upperBound:0,sliderLength:0,value:n,zIndices:i},e}X(l,o);var r=l.prototype;return r.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},l.getDerivedStateFromProps=function(t,e){const n=P(t.value);return n.length?e.pending?null:{value:n.map(i=>x(i,t))}:null},r.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},r.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},r.onEnd=function(t){t&&function(e){Object.keys(e).forEach(n=>{typeof document<"u"&&document.removeEventListener(n,e[n],!1)})}(t),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},r.getValue=function(){return M(this.state.value)},r.getClosestIndex=function(t){let e=Number.MAX_VALUE,n=-1;const{value:i}=this.state,s=i.length;for(let c=0;c<s;c+=1){const u=this.calcOffset(i[c]),d=Math.abs(t-u);d<e&&(e=d,n=c)}return n},r.getMousePosition=function(t){return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},r.getTouchPosition=function(t){const e=t.touches[0];return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},r.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},r.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},r.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},r.getValueFromPosition=function(t){const e=t/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return x(this.state.startValue+e,this.props)},r.getDiffPosition=function(t){let e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},r.resize=function(){const{slider:t,thumb0:e}=this;if(!t||!e)return;const n=this.sizeKey(),i=t.getBoundingClientRect(),s=t[n],c=i[this.posMaxKey()],u=i[this.posMinKey()],d=e.getBoundingClientRect()[n.replace("client","").toLowerCase()],h=s-d,p=Math.abs(c-u);this.state.upperBound===h&&this.state.sliderLength===p&&this.state.thumbSize===d||this.setState({upperBound:h,sliderLength:p,thumbSize:d})},r.calcOffset=function(t){const e=this.props.max-this.props.min;return e===0?0:(t-this.props.min)/e*this.state.upperBound},r.calcValue=function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},r.calcOffsetFromPosition=function(t){const{slider:e}=this,n=e.getBoundingClientRect(),i=n[this.posMaxKey()],s=n[this.posMinKey()];let c=t-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?i:s));return this.props.invert&&(c=this.state.sliderLength-c),c-=this.state.thumbSize/2,c},r.forceValueFromPosition=function(t,e){const n=this.calcOffsetFromPosition(t),i=this.getClosestIndex(n),s=x(this.calcValue(n),this.props),c=this.state.value.slice();c[i]=s;for(let u=0;u<c.length-1;u+=1)if(c[u+1]-c[u]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:c},()=>{e(i),this.fireChangeEvent("onChange")})},r.clearPendingResizeTimeouts=function(){do{const t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},r.start=function(t,e){const n=this["thumb"+t];n&&n.focus();const{zIndices:i}=this.state;i.splice(i.indexOf(t),1),i.push(t),this.setState(s=>({startValue:s.value[t],startPosition:e!==void 0?e:s.startPosition,index:t,zIndices:i}))},r.moveUpByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e-t:e+t,this.props);this.move(Math.min(n,this.props.max))},r.moveDownByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e+t:e-t,this.props);this.move(Math.max(n,this.props.min))},r.move=function(t){const e=this.state.value.slice(),{index:n}=this.state,{length:i}=e,s=e[n];if(t===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:c,max:u,min:d,minDistance:h}=this.props;if(!c){if(n>0){const p=e[n-1];t<p+h&&(t=p+h)}if(n<i-1){const p=e[n+1];t>p-h&&(t=p-h)}}e[n]=t,c&&i>1&&(t>s?(this.pushSucceeding(e,h,n),function(p,g,N,j){for(let f=0;f<p;f+=1){const b=j-f*N;g[p-1-f]>b&&(g[p-1-f]=b)}}(i,e,h,u)):t<s&&(this.pushPreceding(e,h,n),function(p,g,N,j){for(let f=0;f<p;f+=1){const b=j+f*N;g[f]<b&&(g[f]=b)}}(i,e,h,d))),this.setState({value:e},this.fireChangeEvent.bind(this,"onChange"))},r.pushSucceeding=function(t,e,n){let i,s;for(i=n,s=t[i]+e;t[i+1]!==null&&s>t[i+1];i+=1,s=t[i]+e)t[i+1]=D(s,this.props)},r.pushPreceding=function(t,e,n){for(let i=n,s=t[i]-e;t[i-1]!==null&&s<t[i-1];i-=1,s=t[i]-e)t[i-1]=D(s,this.props)},r.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},r.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},r.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},r.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},r.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},r.fireChangeEvent=function(t){this.props[t]&&this.props[t](M(this.state.value),this.state.index)},r.buildThumbStyle=function(t,e){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(e)+1};return n[this.posMinKey()]=t+"px",n},r.buildTrackStyle=function(t,e){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=t,n[this.posMaxKey()]=e,n},r.buildMarkStyle=function(t){var e;return(e={position:"absolute"})[this.posMinKey()]=t,e},r.renderThumbs=function(t){const{length:e}=t,n=[];for(let s=0;s<e;s+=1)n[s]=this.buildThumbStyle(t[s],s);const i=[];for(let s=0;s<e;s+=1)i[s]=this.renderThumb(n[s],s);return i},r.renderTracks=function(t){const e=[],n=t.length-1;e.push(this.renderTrack(0,0,t[0]));for(let i=0;i<n;i+=1)e.push(this.renderTrack(i+1,t[i],t[i+1]));return e.push(this.renderTrack(n+1,t[n],this.state.upperBound)),e},r.renderMarks=function(){let{marks:t}=this.props;const e=this.props.max-this.props.min+1;return typeof t=="boolean"?t=Array.from({length:e}).map((n,i)=>i):typeof t=="number"&&(t=Array.from({length:e}).map((n,i)=>i).filter(n=>n%t==0)),t.map(parseFloat).sort((n,i)=>n-i).map(n=>{const i=this.calcOffset(n),s={key:n,className:this.props.markClassName,style:this.buildMarkStyle(i)};return this.props.renderMark(s)})},r.render=function(){const t=[],{value:e}=this.state,n=e.length;for(let u=0;u<n;u+=1)t[u]=this.calcOffset(e[u],u);const i=this.props.withTracks?this.renderTracks(t):null,s=this.renderThumbs(t),c=this.props.marks?this.renderMarks():null;return v.createElement("div",{ref:u=>{this.slider=u,this.resizeElementRef.current=u},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},i,s,c)},l}(v.Component);z.displayName="ReactSlider",z.defaultProps={min:0,max:100,step:1,pageFn:o=>10*o,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:o=>v.createElement("div",o),renderTrack:o=>v.createElement("div",o),renderMark:o=>v.createElement("span",o)};var $=z;const q=({onRangeChange:o,min:l,max:r,initialMin:t,initialMax:e,title:n})=>{const[i,s]=m.useState([t,e]);return m.useEffect(()=>{o(i)},[i]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"slider-container",children:[a.jsx("label",{className:"text-white flex",children:n}),a.jsxs("div",{className:"range-labels",children:[a.jsx("span",{children:i[0]}),a.jsx("span",{children:i[1]})]}),a.jsx($,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",value:i,min:l,max:r,step:5,onChange:c=>s(c),ariaLabel:["Lower thumb","Upper thumb"]})]})})},K=({value:o,setValue:l,min:r,max:t})=>(m.useEffect(()=>{o<r?l(r):o>t&&l(t)},[o]),a.jsxs("div",{className:"scan relative w-[10rem] mr-5",children:[a.jsx(C.Input,{type:"number",value:o,onChange:e=>l(e.target.value),className:"!border-t-blue-gray-200 text-white placeholder:text-blue-gray-300 placeholder:opacity-100  focus:!border-t-gray-900 appearance-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",labelProps:{className:"before:content-none after:content-none"},containerProps:{className:"min-w-0"}}),a.jsxs("div",{className:"absolute right-1 top-1 flex gap-0.5",children:[a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)<r?0:Number.parseInt(e)-1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})})}),a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)>t?0:Number.parseInt(e)+1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})})})]})]})),G=()=>{const o=S(),l=y(h=>h.scanner.config),[r,t]=m.useState(l.minPrice),[e,n]=m.useState(l.maxPrice),[i,s]=m.useState(l.minChange),[c,u]=m.useState(l.maxChange),d=h=>{const[p,g]=h;s(p),u(g)};return m.useEffect(()=>{o(E({minPrice:r,maxPrice:e,minChange:i,maxChange:c}))},[r,e,i,c]),a.jsx("div",{className:"flex",children:a.jsxs("div",{className:"w-[100%] pb-3",children:[a.jsx("h5",{className:"ml-5 mt-1",children:"Historical Scanner"}),a.jsxs("div",{className:"flex m-[1.5rem] ",children:[a.jsx("label",{className:"mr-5  w-[2.5rem] text-xs",children:"Price"}),a.jsx(K,{value:r,setValue:t,min:0,max:2999}),a.jsx(K,{value:e,setValue:n,min:1,max:3e3})]}),a.jsxs("div",{className:"flex m-[1.5rem]",children:[a.jsx("label",{className:"mr-5 w-[2.5rem] text-xs",children:"Change"}),a.jsx(q,{title:"",onRangeChange:d,min:-50,max:1e3,initialMin:i,initialMax:c})]})]})})},W=({stocks:o})=>{const l=S(),r=O(),t=async()=>{const e=F(o.map(n=>n.symbol));l(R("news")),r("/tiingo",{state:e})};return a.jsx("div",{className:"flex",children:a.jsx("div",{className:"flex  hover:cursor-pointer pl-3 pt-3",onClick:t,children:a.jsxs("div",{className:"view-all-button",children:[a.jsx(H,{}),a.jsxs("span",{className:"text ml-1",children:[a.jsx("span",{className:"text-green",children:"Current"})," News"]})]})})})},Y=({stocks:o,setSortedStocks:l})=>{const r=S(),[t,e]=m.useState(!1),[n,i]=m.useState(!1);y(u=>u.scanner.config),m.useEffect(()=>{l([...o])},[o]);const s=()=>{e(!t),r(E({sortType:"percent",sortOrder:t?"asc":"desc"}))},c=()=>{i(!n),r(E({sortType:"volume",sortOrder:n?"asc":"desc"}))};return a.jsxs("div",{className:"stock-list__header",children:[a.jsx("div",{className:"column",children:"Symbol"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:c,children:["Volume",a.jsx("span",{className:"sort-icon",children:"⇅"})]}),a.jsx("div",{className:"column",children:"Price"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:s,children:["% Change",a.jsx("span",{className:"sort-icon",children:"⇅"})]})]})},Z="bg-[#2A4037] text-[#07F8B5] rounded p-1 w-50",Q="bg-[#490517] text-[#FF5361] rounded p-1 w-50",J=({stock:o})=>{var n;const l=S(),r=O(),t=i=>i.isPositive?a.jsxs("span",{className:`text-lg ${Z}`,children:[i.percent.toFixed(2),"%"]}):a.jsxs("span",{className:` text-lg ${Q}`,children:[i.percent.toFixed(2),"%"]}),e=i=>{l(B(i)),r("/news")};return a.jsx("div",{children:a.jsxs("li",{className:"stock-list__item",onClick:()=>e(o),children:[a.jsx("div",{className:"column",children:o.symbol}),a.jsx("div",{className:"column text-slate-400",children:o.volume.toLocaleString()}),a.jsx("div",{className:"column",children:(n=o.vw)==null?void 0:n.toFixed(2)}),a.jsx("div",{className:`column ${o.isPositive?"positive":"negative"}`,children:(o==null?void 0:o.percent)&&t(o)})]},o.symbol)})},ee=()=>{const[o,l]=m.useState(!1),r=m.useRef(null);return m.useEffect(()=>{let t;return r.current&&(t=new IntersectionObserver(([e])=>{l(e.isIntersecting)},{}),t.observe(r.current)),()=>{r.current&&t&&t.unobserve(r.current)}},[r.current]),[r,o]},te=({stocks:o,setPage:l})=>{const[r,t]=m.useState(o),[e,n]=ee();return m.useEffect(()=>{},[n]),m.useEffect(()=>{e.current=document.querySelector(".stock-list__body")},[]),a.jsx("div",{className:"ml-1 md:m-3 mr-1",children:a.jsxs("div",{className:"stock-list",children:[a.jsx(Y,{stocks:o,setSortedStocks:t}),a.jsx("ul",{className:"stock-list__body",children:r.map((i,s)=>a.jsxs(a.Fragment,{children:[r.length-1===s&&a.jsx("div",{style:{height:"1rem",display:"flex",justifyContent:"center"},ref:e}),a.jsx(J,{stock:i},i.symbol)]}))})]})})},se=()=>{const o=S(),l=y(p=>p.scanner.config),[r,t]=v.useState([]),[e,n]=v.useState([]),i=y(p=>p.stocks.date),[s,c]=v.useState(1),{data:u=[],error:d,isLoading:h}=A({date:i,page:s,sortType:"desc"});return m.useEffect(()=>{u&&!h&&t([...r,...u==null?void 0:u.stocks])},[u]),m.useEffect(()=>{if(r.length){const p=r.filter(L(l)),g=_(l);n(p.sort(g)),o(I(p))}console.log(l)},[l,r]),a.jsxs("div",{children:[a.jsx(W,{stocks:e}),h?a.jsx(V,{}):a.jsx("div",{children:a.jsx(te,{stocks:e,setPage:c})})]})},ne=({children:o})=>a.jsx("div",{className:"gradient border-b border-green",children:o}),ce=()=>{const o=y(l=>l.historicalData.hasError);return a.jsx("div",{children:o?a.jsx(U,{}):a.jsxs(a.Fragment,{children:[a.jsx(ne,{children:a.jsx(G,{})}),a.jsx(se,{})]})})};export{ce as default};
//# sourceMappingURL=Scanner-BLYgmdlK.js.map
