import{R as v,r as m,j as a,d as y,b as j,n as E,k as O,o as F,m as R,p as B,q as A,v as L,w as I,x as V,y as U,E as _}from"./index-tyRZd7wM.js";import{r as C}from"./index-DioFVacK.js";import H from"./ViewSvg-rnaGYE2L.js";import"./index-BKNjMPK8.js";function T(r,l){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o},T(r,l)}function X(r,l){r.prototype=Object.create(l.prototype),r.prototype.constructor=r,T(r,l)}function k(r){return r&&r.stopPropagation&&r.stopPropagation(),r&&r.preventDefault&&r.preventDefault(),!1}function P(r){return r==null?[]:Array.isArray(r)?r.slice():[r]}function S(r){return r!==null&&r.length===1?r[0]:r.slice()}function M(r){Object.keys(r).forEach(l=>{typeof document<"u"&&document.addEventListener(l,r[l],!1)})}function x(r,l){return D(function(o,t){let e=o;return e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e}(r,l),l)}function D(r,l){const o=(r-l.min)%l.step;let t=r-o;return 2*Math.abs(o)>=l.step&&(t+=o>0?l.step:-l.step),parseFloat(t.toFixed(5))}let z=function(r){function l(t){var e;(e=r.call(this,t)||this).onKeyUp=()=>{e.onEnd()},e.onMouseUp=()=>{e.onEnd(e.getMouseEventMap())},e.onTouchEnd=s=>{s.preventDefault(),e.onEnd(e.getTouchEventMap())},e.onBlur=()=>{e.setState({index:-1},e.onEnd(e.getKeyDownEventMap()))},e.onMouseMove=s=>{e.setState({pending:!0});const c=e.getMousePosition(s),u=e.getDiffPosition(c[0]),d=e.getValueFromPosition(u);e.move(d)},e.onTouchMove=s=>{if(s.touches.length>1)return;e.setState({pending:!0});const c=e.getTouchPosition(s);if(e.isScrolling===void 0){const h=c[0]-e.startPosition[0],p=c[1]-e.startPosition[1];e.isScrolling=Math.abs(p)>Math.abs(h)}if(e.isScrolling)return void e.setState({index:-1});const u=e.getDiffPosition(c[0]),d=e.getValueFromPosition(u);e.move(d)},e.onKeyDown=s=>{if(!(s.ctrlKey||s.shiftKey||s.altKey||s.metaKey))switch(e.setState({pending:!0}),s.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":s.preventDefault(),e.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":s.preventDefault(),e.moveUpByStep();break;case"Home":s.preventDefault(),e.move(e.props.min);break;case"End":s.preventDefault(),e.move(e.props.max);break;case"PageDown":s.preventDefault(),e.moveDownByStep(e.props.pageFn(e.props.step));break;case"PageUp":s.preventDefault(),e.moveUpByStep(e.props.pageFn(e.props.step))}},e.onSliderMouseDown=s=>{if(!e.props.disabled&&s.button!==2){if(e.setState({pending:!0}),!e.props.snapDragDisabled){const c=e.getMousePosition(s);e.forceValueFromPosition(c[0],u=>{e.start(u,c[0]),M(e.getMouseEventMap())})}k(s)}},e.onSliderClick=s=>{if(!e.props.disabled&&e.props.onSliderClick&&!e.hasMoved){const c=e.getMousePosition(s),u=x(e.calcValue(e.calcOffsetFromPosition(c[0])),e.props);e.props.onSliderClick(u)}},e.createOnKeyDown=s=>c=>{e.props.disabled||(e.start(s),M(e.getKeyDownEventMap()),k(c))},e.createOnMouseDown=s=>c=>{if(e.props.disabled||c.button===2)return;e.setState({pending:!0});const u=e.getMousePosition(c);e.start(s,u[0]),M(e.getMouseEventMap()),k(c)},e.createOnTouchStart=s=>c=>{if(e.props.disabled||c.touches.length>1)return;e.setState({pending:!0});const u=e.getTouchPosition(c);e.startPosition=u,e.isScrolling=void 0,e.start(s,u[0]),M(e.getTouchEventMap()),function(d){d.stopPropagation&&d.stopPropagation()}(c)},e.handleResize=()=>{const s=window.setTimeout(()=>{e.pendingResizeTimeouts.shift(),e.resize()},0);e.pendingResizeTimeouts.push(s)},e.renderThumb=(s,c)=>{const u=e.props.thumbClassName+" "+e.props.thumbClassName+"-"+c+" "+(e.state.index===c?e.props.thumbActiveClassName:""),d={ref:p=>{e["thumb"+c]=p},key:e.props.thumbClassName+"-"+c,className:u,style:s,onMouseDown:e.createOnMouseDown(c),onTouchStart:e.createOnTouchStart(c),onFocus:e.createOnKeyDown(c),tabIndex:0,role:"slider","aria-orientation":e.props.orientation,"aria-valuenow":e.state.value[c],"aria-valuemin":e.props.min,"aria-valuemax":e.props.max,"aria-label":Array.isArray(e.props.ariaLabel)?e.props.ariaLabel[c]:e.props.ariaLabel,"aria-labelledby":Array.isArray(e.props.ariaLabelledby)?e.props.ariaLabelledby[c]:e.props.ariaLabelledby,"aria-disabled":e.props.disabled},h={index:c,value:S(e.state.value),valueNow:e.state.value[c]};return e.props.ariaValuetext&&(d["aria-valuetext"]=typeof e.props.ariaValuetext=="string"?e.props.ariaValuetext:e.props.ariaValuetext(h)),e.props.renderThumb(d,h)},e.renderTrack=(s,c,u)=>{const d={key:e.props.trackClassName+"-"+s,className:e.props.trackClassName+" "+e.props.trackClassName+"-"+s,style:e.buildTrackStyle(c,e.state.upperBound-u)},h={index:s,value:S(e.state.value)};return e.props.renderTrack(d,h)};let n=P(t.value);n.length||(n=P(t.defaultValue)),e.pendingResizeTimeouts=[];const i=[];for(let s=0;s<n.length;s+=1)n[s]=x(n[s],t),i.push(s);return e.resizeObserver=null,e.resizeElementRef=v.createRef(),e.state={index:-1,upperBound:0,sliderLength:0,value:n,zIndices:i},e}X(l,r);var o=l.prototype;return o.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},l.getDerivedStateFromProps=function(t,e){const n=P(t.value);return n.length?e.pending?null:{value:n.map(i=>x(i,t))}:null},o.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},o.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},o.onEnd=function(t){t&&function(e){Object.keys(e).forEach(n=>{typeof document<"u"&&document.removeEventListener(n,e[n],!1)})}(t),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},o.getValue=function(){return S(this.state.value)},o.getClosestIndex=function(t){let e=Number.MAX_VALUE,n=-1;const{value:i}=this.state,s=i.length;for(let c=0;c<s;c+=1){const u=this.calcOffset(i[c]),d=Math.abs(t-u);d<e&&(e=d,n=c)}return n},o.getMousePosition=function(t){return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},o.getTouchPosition=function(t){const e=t.touches[0];return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},o.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},o.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},o.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},o.getValueFromPosition=function(t){const e=t/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return x(this.state.startValue+e,this.props)},o.getDiffPosition=function(t){let e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},o.resize=function(){const{slider:t,thumb0:e}=this;if(!t||!e)return;const n=this.sizeKey(),i=t.getBoundingClientRect(),s=t[n],c=i[this.posMaxKey()],u=i[this.posMinKey()],d=e.getBoundingClientRect()[n.replace("client","").toLowerCase()],h=s-d,p=Math.abs(c-u);this.state.upperBound===h&&this.state.sliderLength===p&&this.state.thumbSize===d||this.setState({upperBound:h,sliderLength:p,thumbSize:d})},o.calcOffset=function(t){const e=this.props.max-this.props.min;return e===0?0:(t-this.props.min)/e*this.state.upperBound},o.calcValue=function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},o.calcOffsetFromPosition=function(t){const{slider:e}=this,n=e.getBoundingClientRect(),i=n[this.posMaxKey()],s=n[this.posMinKey()];let c=t-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?i:s));return this.props.invert&&(c=this.state.sliderLength-c),c-=this.state.thumbSize/2,c},o.forceValueFromPosition=function(t,e){const n=this.calcOffsetFromPosition(t),i=this.getClosestIndex(n),s=x(this.calcValue(n),this.props),c=this.state.value.slice();c[i]=s;for(let u=0;u<c.length-1;u+=1)if(c[u+1]-c[u]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:c},()=>{e(i),this.fireChangeEvent("onChange")})},o.clearPendingResizeTimeouts=function(){do{const t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},o.start=function(t,e){const n=this["thumb"+t];n&&n.focus();const{zIndices:i}=this.state;i.splice(i.indexOf(t),1),i.push(t),this.setState(s=>({startValue:s.value[t],startPosition:e!==void 0?e:s.startPosition,index:t,zIndices:i}))},o.moveUpByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e-t:e+t,this.props);this.move(Math.min(n,this.props.max))},o.moveDownByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=x(this.props.invert&&this.props.orientation==="horizontal"?e+t:e-t,this.props);this.move(Math.max(n,this.props.min))},o.move=function(t){const e=this.state.value.slice(),{index:n}=this.state,{length:i}=e,s=e[n];if(t===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:c,max:u,min:d,minDistance:h}=this.props;if(!c){if(n>0){const p=e[n-1];t<p+h&&(t=p+h)}if(n<i-1){const p=e[n+1];t>p-h&&(t=p-h)}}e[n]=t,c&&i>1&&(t>s?(this.pushSucceeding(e,h,n),function(p,g,w,N){for(let f=0;f<p;f+=1){const b=N-f*w;g[p-1-f]>b&&(g[p-1-f]=b)}}(i,e,h,u)):t<s&&(this.pushPreceding(e,h,n),function(p,g,w,N){for(let f=0;f<p;f+=1){const b=N+f*w;g[f]<b&&(g[f]=b)}}(i,e,h,d))),this.setState({value:e},this.fireChangeEvent.bind(this,"onChange"))},o.pushSucceeding=function(t,e,n){let i,s;for(i=n,s=t[i]+e;t[i+1]!==null&&s>t[i+1];i+=1,s=t[i]+e)t[i+1]=D(s,this.props)},o.pushPreceding=function(t,e,n){for(let i=n,s=t[i]-e;t[i-1]!==null&&s<t[i-1];i-=1,s=t[i]-e)t[i-1]=D(s,this.props)},o.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},o.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},o.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},o.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},o.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},o.fireChangeEvent=function(t){this.props[t]&&this.props[t](S(this.state.value),this.state.index)},o.buildThumbStyle=function(t,e){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(e)+1};return n[this.posMinKey()]=t+"px",n},o.buildTrackStyle=function(t,e){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=t,n[this.posMaxKey()]=e,n},o.buildMarkStyle=function(t){var e;return(e={position:"absolute"})[this.posMinKey()]=t,e},o.renderThumbs=function(t){const{length:e}=t,n=[];for(let s=0;s<e;s+=1)n[s]=this.buildThumbStyle(t[s],s);const i=[];for(let s=0;s<e;s+=1)i[s]=this.renderThumb(n[s],s);return i},o.renderTracks=function(t){const e=[],n=t.length-1;e.push(this.renderTrack(0,0,t[0]));for(let i=0;i<n;i+=1)e.push(this.renderTrack(i+1,t[i],t[i+1]));return e.push(this.renderTrack(n+1,t[n],this.state.upperBound)),e},o.renderMarks=function(){let{marks:t}=this.props;const e=this.props.max-this.props.min+1;return typeof t=="boolean"?t=Array.from({length:e}).map((n,i)=>i):typeof t=="number"&&(t=Array.from({length:e}).map((n,i)=>i).filter(n=>n%t==0)),t.map(parseFloat).sort((n,i)=>n-i).map(n=>{const i=this.calcOffset(n),s={key:n,className:this.props.markClassName,style:this.buildMarkStyle(i)};return this.props.renderMark(s)})},o.render=function(){const t=[],{value:e}=this.state,n=e.length;for(let u=0;u<n;u+=1)t[u]=this.calcOffset(e[u],u);const i=this.props.withTracks?this.renderTracks(t):null,s=this.renderThumbs(t),c=this.props.marks?this.renderMarks():null;return v.createElement("div",{ref:u=>{this.slider=u,this.resizeElementRef.current=u},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},i,s,c)},l}(v.Component);z.displayName="ReactSlider",z.defaultProps={min:0,max:100,step:1,pageFn:r=>10*r,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:r=>v.createElement("div",r),renderTrack:r=>v.createElement("div",r),renderMark:r=>v.createElement("span",r)};var $=z;const G=({onRangeChange:r,min:l,max:o,initialMin:t,initialMax:e,title:n})=>{const[i,s]=m.useState([t,e]);return m.useEffect(()=>{r(i)},[i]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"slider-container",children:[a.jsx("label",{className:"text-white flex",children:n}),a.jsxs("div",{className:"range-labels",children:[a.jsx("span",{children:i[0]}),a.jsx("span",{children:i[1]})]}),a.jsx($,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",value:i,min:l,max:o,step:5,onChange:c=>s(c),ariaLabel:["Lower thumb","Upper thumb"]})]})})},K=({value:r,setValue:l,min:o,max:t})=>(m.useEffect(()=>{r<o?l(o):r>t&&l(t)},[r]),a.jsxs("div",{className:"scan relative w-[10rem] mr-5",children:[a.jsx(C.Input,{type:"number",value:r,onChange:e=>l(e.target.value),className:"!border-t-blue-gray-200 text-white placeholder:text-blue-gray-300 placeholder:opacity-100  focus:!border-t-gray-900 appearance-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",labelProps:{className:"before:content-none after:content-none"},containerProps:{className:"min-w-0"}}),a.jsxs("div",{className:"absolute right-1 top-1 flex gap-0.5",children:[a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)<o?0:Number.parseInt(e)-1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})})}),a.jsx(C.IconButton,{size:"sm",className:"rounded",onClick:()=>l(e=>Number.parseInt(e)>t?0:Number.parseInt(e)+1),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4",children:a.jsx("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})})})]})]})),W=()=>{const r=y(),l=j(h=>h.scanner.config),[o,t]=m.useState(l.minPrice),[e,n]=m.useState(l.maxPrice),[i,s]=m.useState(l.minChange),[c,u]=m.useState(l.maxChange),d=h=>{const[p,g]=h;s(p),u(g)};return m.useEffect(()=>{r(E({minPrice:o,maxPrice:e,minChange:i,maxChange:c}))},[o,e,i,c]),a.jsx("div",{className:"flex",children:a.jsxs("div",{className:"w-[100%] pb-3",children:[a.jsx("h5",{className:"ml-5 mt-1",children:"Historical Scanner"}),a.jsxs("div",{className:"flex m-[1.5rem] ",children:[a.jsx("label",{className:"mr-5  w-[2.5rem] text-xs",children:"Price"}),a.jsx(K,{value:o,setValue:t,min:0,max:2999}),a.jsx(K,{value:e,setValue:n,min:1,max:3e3})]}),a.jsxs("div",{className:"flex m-[1.5rem]",children:[a.jsx("label",{className:"mr-5 w-[2.5rem] text-xs",children:"Change"}),a.jsx(G,{title:"",onRangeChange:d,min:-50,max:1e3,initialMin:i,initialMax:c})]})]})})},Y=({stocks:r})=>{const l=y(),o=O(),t=async()=>{const e=F(r.map(n=>n.symbol));l(R("news")),o("/tiingo",{state:e})};return a.jsx("div",{className:"flex",children:a.jsx("div",{className:"flex  hover:cursor-pointer pl-3 pt-3",onClick:t,children:a.jsxs("div",{className:"view-all-button",children:[a.jsx(H,{}),a.jsxs("span",{className:"text ml-1",children:[a.jsx("span",{className:"text-green",children:"Current"})," News"]})]})})})},Z=({stocks:r,setSortedStocks:l})=>{const o=y(),[t,e]=m.useState(!1),[n,i]=m.useState(!1);m.useEffect(()=>{l([...r])},[r]);const s=()=>{e(!t),o(E({sortType:"percent",sortOrder:t?"asc":"desc"}))},c=()=>{i(!n),o(E({sortType:"volume",sortOrder:n?"asc":"desc"}))};return a.jsxs("div",{className:"stock-list__header",children:[a.jsx("div",{className:"column",children:"Symbol"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:c,children:["Volume",a.jsx("span",{className:"sort-icon",children:"⇅"})]}),a.jsx("div",{className:"column",children:"Price"}),a.jsxs("div",{className:"column hover:text-brand-blue hover:cursor-pointer",onClick:s,children:["Change",a.jsx("span",{className:"sort-icon",children:"⇅"})]})]})},q="bg-[#2A4037] text-[#07F8B5] rounded p-1 w-50",Q="bg-[#490517] text-[#FF5361] rounded p-1 w-50",J=({stock:r})=>{var n;const l=y(),o=O(),t=i=>i.isPositive?a.jsxs("span",{className:`text-lg ${q}`,children:[i.percent.toFixed(2),"%"]}):a.jsxs("span",{className:` text-lg ${Q}`,children:[i.percent.toFixed(2),"%"]}),e=i=>{l(B(i)),o("/news")};return a.jsx("div",{children:a.jsxs("li",{className:"stock-list__item",onClick:()=>e(r),children:[a.jsx("div",{className:"column",children:r.symbol}),a.jsx("div",{className:"column text-slate-400",children:r.volume.toLocaleString()}),a.jsx("div",{className:"column",children:(n=r.vw)==null?void 0:n.toFixed(2)}),a.jsx("div",{className:`column ${r.isPositive?"positive":"negative"}`,children:(r==null?void 0:r.percent)&&t(r)})]},r.symbol)})},ee=({trigger:r})=>{const[l,o]=m.useState(!1),t=m.useRef(null);return m.useEffect(()=>{let e;return t.current&&(e=new IntersectionObserver(([n])=>{o(n.isIntersecting)},{}),e.observe(t.current)),()=>{t.current&&e&&e.unobserve(t.current)}},[r]),[t,l]},te=({stocks:r,setPage:l})=>{const[o,t]=m.useState(r),[e,n]=ee({trigger:o});return m.useEffect(()=>{n&&l(i=>i<8?i+1:i)},[n]),a.jsx("div",{className:"ml-1 md:m-3 mr-1",children:a.jsxs("div",{className:"stock-list",children:[a.jsx(Z,{stocks:r,setSortedStocks:t}),a.jsxs("p",{children:["Total: ",o.length]}),a.jsx("ul",{className:"stock-list__body",children:o.map((i,s)=>a.jsxs(a.Fragment,{children:[o.length-1===s&&a.jsx("div",{style:{height:"1rem",display:"flex",justifyContent:"center"},ref:e}),a.jsx(J,{stock:i},i.symbol)]}))})]})})},se=()=>{const r=y(),l=j(p=>p.scanner.config),[o,t]=v.useState([]),[e,n]=v.useState([]),i=j(p=>p.stocks.date),[s,c]=v.useState(1),{data:u=[],error:d,isLoading:h}=A({date:i,page:s,sortType:"desc"});return m.useEffect(()=>{u&&!h&&t([...o,...u==null?void 0:u.stocks])},[u]),m.useEffect(()=>{if(o.length){const p=o.filter(L(l)),g=U(l);n(p.sort(g)),r(I(p))}},[l,o]),a.jsxs("div",{children:[a.jsx(Y,{stocks:e}),h?a.jsx(V,{}):a.jsx("div",{children:a.jsx(te,{stocks:e,setPage:c})})]})},ne=({children:r})=>a.jsx("div",{className:"gradient border-b border-green",children:r}),ce=()=>{const r=j(l=>l.historicalData.hasError);return a.jsx("div",{children:r?a.jsx(_,{}):a.jsxs(a.Fragment,{children:[a.jsx(ne,{children:a.jsx(W,{})}),a.jsx(se,{})]})})};export{ce as default};
//# sourceMappingURL=Scanner-DvnUBxfb.js.map
